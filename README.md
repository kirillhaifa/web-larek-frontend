# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами
- src/components - ts компоненты кода. содержит папку base с базовым кодом, а также компоненты актуальные только для этого проекта: card, form, modal, model.
- src/components/base - базовый, потенциально переиспользуемый код. содержит api, evevnts, form, modal
- src/components/card - класс карточки товара 
- src/components/form - дочерние классы form, formAdress и formContacts 
- src/components/modal - дочерние классы modal: modalProduct, modalBascket, modalAddress, modalFinal


## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

npm install 
npm run start

или
yarn 
yarn start

## Сборка

npm run build или yarn build


## Описание 

Приложение готово, создать архитектуру отдельно не удалось, поэтому сдаю вместе, архитектура создавалась в процеесе путем проб и ошибок. Многократно тестировал, ошибок не нашел. 

Проект можно условно поделить на два слоя: model, view, а также код index.ts 

1. model - слой хранения информации. получает через api список товаров, выдает по запросу в другие классы. содержит классы:

  • ProductModel - модель хранения отдельного товара 
  • ProductsListModel - модель хранения всего списка товаров. 
  • Bascket - модель корзины. 
  • Order - модель хранения данных о заказе

2. view - слой отображения информации в бразузере. берет данные из модели, отвечает за переключение между можальными окнами, дополняет модель в соответсвии с действиями пользователя. Содержит классы:

  • Базовый, потенциально переиспользуемы код:

    1. Api - взаимодействие с сервером 
    2. Events - брокер событий 
    3. Form - базовый класс формы
    4. Modal - базовый класс модального окна 

  • Код, предназначенный только для этого проектаЖ

    1. Card - отрисовка карточки товара 

        Формы:

    2. FormAddress - форма заполнения адерса. имеет свою валидацию из-за кнопок выбора метода оплаты. 
    3. FormContacts - форма контактов

        Модальные окна:

    4. ModalProduct - модальное окно продукта. берет продут из модели, может добавить или удалить его из корзины.
    5. ModalBasсket - модальное окно корзины. помимо основных функций модального окна, управляет кнопкой перехода к оформлению заказа в зависмости от того, есть или нет товар в корзине. 
    6. AddressModal - модальное окно заполнения адресса и вида оплаты. Взаимодействует с классом AdsressForm. Введенная инормация валидируется, в зависимости от нее активируется кнопка сабмита. Полученную информацию записывает в модель. 
    7. ModalContacts - модальное окно заполнения контактов. Взаимодействует с классом FormContacts. Валидация наследуется от родительского класса. Полученные информацию передает в модель. Кнопка сабмита здесь имеет сразу ряд функций, тк это завершающий шаг покупки: очистка корзины, api/post заказа, открытие модального финального окна.
    8. FinalModal - финальное окно. Получает из модели данные стоимости заказа. На этом цикл заказнчивается. 

        Модель:

    9. ProductModel - модель отдельного продукта. Выдает продукт по запросу. 
    10. ProductsListModel - модель полного списка продуктов. Выдает полный список продуктов, а также находит в нем продукт по id
    11. Bascket - модель корзины. Возвращает список добавленных продуктов, доавляет и удаляет продукт, считает общую стоимость, считает колличество товаров. 
    12. Order - модель заказа. Хранит данные о покупателе, выдает стоимость заказа. 

3. Также отдельно код файла index.ts. В нем иниилизируются класса, базовае елементы страницы, распределются обработчики событий. 

Общий цикл работы такой:

  • Получаем через api список товаров и отрисовываем на его основе карточки. 
  • Карточки открывают модальное окно товара, в котором можно добавить или удалить товар из корзины
  • Кнопка корзины открывает модальное окно коризны, данные берет из модели. При удалении товара отрисовывается заново. Кнопка сабмита ведет к окну адреса. 
  • В модальном окне адреса выбирается метод оплаты и адресс, данные записывается в модель заказа при сабмите. 
  • В модальном окне контактов заполняются и валидируются данные почты и номера телефона, данные записываются в модель заказа. При сабмите присходит отправка заказа на сервер, очистка корзи и открытие финального модального окна.
  • Финальное модальное окно берет стоимоть заказа из модели. На этом цикл окончен. 


